<div align="center">

<img src="../src/images/logo-128.png" width="80" height="80" align="center">

# プロキシアシスタント

</div>

<div align="center">

[![Chrome拡張機能](https://img.shields.io/badge/Chrome-Extension-blue?logo=google-chrome)](https://chrome.google.com/webstore)
[![Firefox拡張機能](https://img.shields.io/badge/Firefox-Extension-orange?logo=firefox)](https://addons.mozilla.org/)
[![Manifest V3](https://img.shields.io/badge/Manifest-V3-green)](https://developer.chrome.com/docs/extensions/mv3/intro/)
[![多言語](https://img.shields.io/badge/多言語-yellow)](README-ja.md)

</div>

<div align="center">

[简体中文](../README.md) | [繁體中文](README-zh-TW.md) | [English](README-en.md) | [**日本語**](README-ja.md) | [Français](README-fr.md) | [Deutsch](README-de.md) | [Español](README-es.md) | [Português](README-pt.md) | [Русский](README-ru.md) | [한국어](README-ko.md)

</div>

<div align="center">

強力なブラウザプロキシ管理拡張機能。ChromeとFirefoxに対応し、ネットワークプロキシの構成と切り替えが簡単になります。

</div>

![](../public/img/promotion/1400-560-big.jpeg)

## ✨ 機能特徴

### 🔌 複数のプロキシプロトコル対応
- **HTTP** - 従来型HTTPプロキシ
- **HTTPS** - 安全なHTTPSプロキシ
- **SOCKS5** - TCP/UDP対応SOCKS5プロキシ
- **SOCKS4** - 旧SOCKS4プロキシ互換性

### 🌐 マルチブラウザ対応
- **Chrome** - Manifest V3 + Service Workerを使用
- **Firefox** - onRequest APIでプロキシをインターセプト

### 🔄 3つのプロキシモード

| モード | 説明 |
|--------|------|
| **無効** | プロキシを無効化し、システムデフォルトのネットワーク接続を使用 |
| **手動** | リストから手動でプロキシを選択 |
| **自動** | URLルールに基づいて自動的にプロキシを選択（PACモード） |

| ![](../public/img/demo-popup-01.png) | ![](../public/img/demo-popup-02.png) | ![](../public/img/demo-popup-03.png) |
|:---:|:---:|:---:|
| 無効モード | 手動モード | 自動モード |

### 📋 柔軟なURLルール設定

- **プロキシを使用しないアドレス** (`bypass_urls`): 手動モードで直接接続するドメイン/IP
- **プロキシを使用するアドレス** (`include_urls`): 自動モードでプロキシ経由でアクセスするドメイン
- **フォールバックポリシー**: 自動モードで接続失敗時に直接接続または拒否を選択
- ワイルドカード `*` とドメイン一致対応
- 異なるウェブサイトに異なるプロキシを使用するシナリオに最適

### 🔐 プロキシ認証対応

- ユーザー名/パスワード認証対応
- プロキシサーバーからの認証リクエストを自動処理
- 資格情報の安全な保存

### 🧪 プロキシテスト機能

- **接続テスト**: プロキシの可用性を確認
- **遅延測定**: プロキシの応答時間をテスト
- **一括テスト**: ワンクリックで全プロキシをテスト
- **カラー表示**: 緑(<500ms) / オレンジ(≥500ms) / 赤(失敗)

### 🏃 プロキシ状態検出

- 現在のブラウザプロキシ設定を検出
- 拡張機能がプロキシを正常に設定しているかを検証
- 他の拡張機能によるプロキシ制御を識別
- 正常、警告、エラーの3つの結果を提供

### 🌙 テーマモード

- **ライトモード**: 日中使用
- **ダークモード**: 夜間使用
- **自動切り替え**: 時間に応じてテーマを自動切り替え（設定可能）

| ![ライトモード](../public/img/demo-light.png) | ![ダークモード](../public/img/demo-night.png) |
|:---:|:---:|
| ライトモード | ダークモード |

### ☁️ データストレージと同期

- **ローカルファーストストレージ**: プロキシ設定は常にローカルストレージに保存
- **クラウド同期**: Chrome/Firefoxアカウント同期（オプション）
- **スマートマージ**: 同期エラー時にローカルとリモートデータを自動マージ
- **インポート/エクスポート**: JSON形式の設定バックアップと復元

### 🌍 多言語対応

この拡張機能は以下の言語に対応：

| 言語 | コード | 対応状況 |
|------|--------|----------|
| 简体中文 | zh-CN | ✅ 対応済み |
| 繁體中文 | zh-TW | ✅ 対応済み |
| English | en | ✅ 対応済み |
| 日本語 | ja | ✅ 対応済み |
| Français | fr | ✅ 対応済み |
| Deutsch | de | ✅ 対応済み |
| Español | es | ✅ 対応済み |
| Português | pt | ✅ 対応済み |
| Русский | ru | ✅ 対応済み |
| 한국어 | ko | ✅ 対応済み |

## 📷 設定画面

![](../public/img/demo.png)

## 📁 プロジェクト構成

```
ProxyAssistant/
├── readme/                    # 多言語ドキュメント
│   ├── README-zh-CN.md       # 簡体字中国語
│   ├── README-zh-TW.md       # 繁体字中国語
│   ├── README-en.md          # 英語
│   └── ...
├── src/                       # ソースコード
│   ├── manifest_chrome.json  # Chrome拡張機能設定
│   ├── manifest_firefox.json # Firefox拡張機能設定
│   ├── main.html             # 設定ページ
│   ├── popup.html            # ポップアップページ
│   ├── js/
│   │   ├── worker.js         # バックグラウンドサービス（Chrome: Service Worker）
│   │   ├── popup.js          # ポップアップメインロジック
│   │   ├── main.js           # 設定ページメインロジック
│   │   ├── i18n.js           # 国際化対応
│   │   └── jquery.js         # jQueryライブラリ
│   ├── css/
│   │   ├── main.css          # 設定ページスタイル
│   │   ├── popup.css         # ポップアップスタイル
│   │   ├── theme.css         # テーマスタイル
│   │   ├── switch.css        # スイッチコンポーネントスタイル
│   │   ├── delete-button.css # 削除ボタンスタイル
│   │   └── eye-button.css    # パスワード表示ボタンスタイル
│   └── images/               # 画像リソース
│       ├── icon-16.png
│       ├── icon-32.png
│       ├── icon-48.png
│       ├── icon-128.png
│       ├── logo-128.png
│       └── promotion/        # プロモーション画像
└── public/                   # 公開リソース
```

## 🚀 クイックスタート

### 拡張機能のインストール

**Chrome:**

方法1（推奨）: Chrome ウェブストアからインストール
1. Chromeブラウザを開き、[Chrome ウェブストア](https://chrome.google.com/webstore)にアクセス
2. 「プロキシアシスタント」を検索
3. 「Chromeに追加」をクリック

方法2: ローカルインストール
- **オプションA（ソースコード使用）**: ソースコードダウンロード、`src/manifest_chrome.json` を `manifest.json` にリネームし、`src` ディレクトリを読み込む
- **オプションB（パッケージ使用）**: releaseディレクトリからChrome拡張機能パッケージ（`.zip`）をダウンロード、解凍して該当ディレクトリを読み込む

**Firefox:**

方法1（推奨）: Firefox アドオンからインストール
1. Firefoxブラウザを開き、[Firefox アドオン](https://addons.mozilla.org/)にアクセス
2. 「プロキシアシスタント」を検索
3. 「Firefoxに追加」をクリック

方法2: ローカルインストール
1. releaseディレクトリからFirefox拡張機能パッケージ（`.xpi`）をダウンロード
2. Firefoxブラウザを開き、`about:addons`にアクセス
3. **歯車アイコン** → **ファイルからアドオンをインストール**
4. ダウンロードした `.xpi` ファイルを選択

### プロキシの追加

1. 拡張機能アイコンをクリックしてポップアップを開く
2. **「設定」** ボタンをクリックして設定ページを開く
3. **「プロキシを追加」** ボタンをクリックして新しいプロキシを追加
4. プロキシ情報を入力：
   - プロキシ名
   - プロトコルタイプ (HTTP/HTTPS/SOCKS4/SOCKS5)
   - プロキシアドレス (IPまたはドメイン)
   - ポート番号
   - （オプション）ユーザー名とパスワード
   - （オプション）URLルール設定
5. **「保存」** ボタンをクリック

### プロキシの使用

**手動モード**:
1. ポップアップで **「手動」** モードを選択
2. リストから使用するプロキシを選択
3. 「接続済み」と表示されれば有効

**自動モード**:
1. ポップアップで **「自動」** モードを選択
2. 設定ページで各プロキシのURLルールを設定
3. ウェブサイトへのアクセス時に自動的にプロキシを選択

## 📖 詳細説明

### URLルール構文

以下のマッチングルールに対応：

```
# 完全一致
google.com

# サブドメイン一致
.google.com
www.google.com

# ワイルドカード一致
*.google.com
*.twitter.com

# IPアドレス
192.168.1.1
10.0.0.0/8
```

### フォールバックポリシー

自動モードでプロキシ接続が失敗した場合：

| ポリシー | 説明 |
|----------|------|
| **直接接続 (DIRECT)** | プロキシをバイパスし、ターゲットウェブサイトに直接接続 |
| **接続拒否 (REJECT)** | リクエストを拒否 |

### PACスクリプト自動モード

自動モードはPAC（Proxy Auto-Config）スクリプトを使用：
- 現在のURLに基づいて自動的にプロキシを選択
- プロキシリスト順に一致を確認し、最初のマッチを返す
- フォールバックポリシー対応
- ブラウザ起動時に最後の構成を自動復元

### クイック操作

| 操作 | 方法 |
|------|------|
| プロキシカードの展開/折叠 | カードヘッダーをクリック |
| 全カードの展開/折叠 | 「すべて展開/折叠」ボタンをクリック |
| プロキシのドラッグ並べ替え | カードヘッダーのドラッグハンドルをドラッグ |
| パスワードの表示/非表示 | パスワード欄右目のアイコンをクリック |
| 単一プロキシの有効/無効 | カード上のスイッチを切り替え |
| 単一プロキシのテスト | 「接続テスト」ボタンをクリック |
| 全プロキシのテスト | 「すべてテスト」ボタンをクリック |

### 設定のインポート/エクスポート

1. **設定をエクスポート**: 「設定をエクスポート」をクリックしてJSONファイルをダウンロード
2. **設定をインポート**: 「設定を読み込む」をクリックしてJSONファイルを選択

設定に含まれるもの：
- 全プロキシ情報
- テーマ設定
- ナイトモード時間帯
- 言語設定
- 同期設定

### プロキシ状態検出

「プロキシ効果を検出」ボタンをクリックすると：
- 現在のブラウザプロキシモードを表示
- 拡張機能がプロキシを正常に設定しているかを検証
- 他の拡張機能が制御を奪っていないかを検出
- 問題の診断と解決策を取得

## 🔧 技術アーキテクチャ

### Manifest V3

- ChromeはManifest V3仕様に準拠
- Service Workerがバックグラウンドページを置き換え
- Firefoxはbackground scripts + onRequest APIを使用

### コアモジュール

1. **worker.js (Chrome)**:
   - プロキシ設定管理
   - PACスクリプト生成
   - 認証処理
   - プロキシテストロジック
   - ストレージ変更監視

2. **popup.js**:
   - ポップアップインターフェース操作
   - プロキシ状態表示
   - クイックプロキシ切り替え
   - 自動一致表示

3. **main.js**:
   - 設定ページロジック
   - プロキシ管理（追加/変更/削除）
   - ドラッグ&ドロップ並べ替え
   - インポート/エクスポート
   - プロキシ検出機能

4. **i18n.js**:
   - 多言語対応
   - リアルタイム言語切り替え

### データストレージ

- `chrome.storage.local`: ローカルストレージ（常に使用）
- `chrome.storage.sync`: クラウド同期ストレージ（オプション）
- ローカルファースト原則を採用し、同期配额問題を解決

### ブラウザ互換性

| 機能 | Chrome | Firefox |
|------|--------|---------|
| 手動モード | ✅ | ✅ |
| 自動モード | ✅ | ✅ |
| プロキシ認証 | ✅ | ✅ |
| プロキシテスト | ✅ | ✅ |
| テーマ切り替え | ✅ | ✅ |
| データ同期 | ✅ | ✅ |
| プロキシ検出 | ✅ | ✅ |

## 📝 使用シナリオ

### シナリオ1: 複数プロキシ切り替え

- 異なるネットワーク環境に異なるプロキシを設定
- オフィスネットワークでは社内プロキシを使用
- 自宅ネットワークではVPNプロキシを使用
- ワンクリック快速切り替え

### シナリオ2: スマートルーティング

- 国内ウェブサイトは直接接続
- 特定のウェブサイトはプロキシ経由
- ドメインに基づいて自動選択

### シナリオ3: プロキシポールテスト

- 複数のプロキシをインポート
- バッチで遅延をテスト
- 最適なプロキシを選択

### シナリオ4: チーム共有

- 設定ファイルをエクスポート
- チームメンバーと共有
- 統一されたプロキシ設定

## ⚠️ 注意事項

1. **権限説明**: 拡張機能には以下の権限が必要です：
   - `proxy`: プロキシ設定管理
   - `storage`: 設定保存
   - `webRequest` / `webRequestAuthProvider`: 認証リクエスト処理
   - `<all_urls>`: 全ウェブサイトURLへのアクセス

2. **他の拡張機能との競合**: プロキシの競合が発生した場合は、他のプロキシ/VPN類拡張機能を無効にしてください

3. **セキュリティ**: 資格情報はブラウザのローカルに保存されます。デバイスの安全を確保してください

4. **ネットワーク要件**: プロキシサーバーに正常にアクセスできることを確認してください

5. **Firefox制限**: Firefox最低バージョン要件: 142.0

## 📄 プライバシーポリシー

[プライバシーポリシー](https://sites.google.com/view/proxy-assistant/privacy-policy)

## 📄 ライセンス

MIT License - 詳細は [LICENSE](../LICENSE) ファイルを参照

## 🤝 コントリビューション

IssueおよびPull Requestをお待ちしています！

## 📧 連絡先

ご質問やご提案がある場合は、GitHub Issuesを通じてフィードバックしてください。

---

<div align="center">

**このプロジェクトが役に立った場合は、Star ⭐ を押してください！**

</div>
