<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title data-i18n="settings_title">代理助手设置</title>
  <!-- Try using a simpler favicon path -->
  <link rel="icon" type="image/png" href="./images/icon-128.png">
  <link rel="shortcut icon" type="image/png" href="./images/icon-128.png">
  <link href="./css/eye-button.css" rel="stylesheet">
  <link href="./css/main.css" rel="stylesheet">
  <link href="./css/theme.css" rel="stylesheet">
</head>

<body>
  <div class="box">
    <div class="logo">
      <img src="./images/icon-128.png" alt="logo" />
      <span class="logo-text" data-i18n="app_name">代理助手</span>
    </div>

    <div class="t1" data-i18n="manage_proxies">管理代理</div>
    <div class="header-container">
      <div class="t2" data-i18n="manage_proxies_desc">添加、编辑或删除您的代理</div>
      <div class="list-controls">
          <button id="add-proxy-btn" class="control-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              <span data-i18n="add_new">新增</span>
          </button>
          <button id="test-all-btn" class="control-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></svg>
              <span data-i18n="test_all">测试</span>
          </button>
          <button id="expand-collapse-btn" class="control-btn">
              <svg class="icon-expand" viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
              <span data-i18n="expand_all">展开</span>
          </button>
      </div>
    </div>

    <div class="list" id="proxy-list">

    </div>

    <div class="t1" style="margin-top: 40px;" data-i18n="system_config">系统配置</div>
    <div class="t2" style="margin-bottom: 25px;" data-i18n="config_desc">导出当前的代理列表及系统设置以便备份或与他人共享。</div>

    <div class="system-config-list">
      <!-- Language Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="language_settings">语言设置</div>
              <div class="config-row-desc" data-i18n="select_language">选择语言</div>
          </div>
          <div class="config-row-right">
              <div class="lh-select language-selector" style="width: 150px;">
                  <div class="lh-select_k">
                      <span class="lh-select-val" id="current-language-display">简体中文</span>
                      <span class="iconfont"></span>
                  </div>
                  <ul class="lh-select-op" id="language-options">
                      <li data-value="zh-CN">简体中文</li>
                      <li data-value="zh-TW">繁體中文</li>
                      <li data-value="en">English</li>
                      <li data-value="ja">日本語</li>
                      <li data-value="fr">Français</li>
                      <li data-value="de">Deutsch</li>
                      <li data-value="es">Español</li>
                      <li data-value="ko">한국어</li>
                      <li data-value="pt">Português</li>
                      <li data-value="ru">Русский</li>
                  </ul>
              </div>
          </div>
      </div>

      <!-- Theme Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="theme_settings">主题模式</div>
              <div class="config-row-desc" data-i18n="theme_settings_desc">选择白天模式、夜间模式或自动切换</div>
          </div>
          <div class="config-row-right">
              <div class="theme-selector">
                  <button class="theme-btn" data-theme="light" data-i18n="theme_light">白天</button>
                  <button class="theme-btn" data-theme="dark" data-i18n="theme_dark">夜间</button>
                  <button class="theme-btn" data-theme="auto" data-i18n="theme_auto">自动</button>
              </div>
          </div>
      </div>

      <!-- Auto Mode Time Settings -->
      <div class="config-row auto-mode-time-row" style="display: none;">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="dark_mode_schedule">自动切换时间</div>
              <div class="config-row-desc" data-i18n="dark_mode_schedule_desc">设置夜间模式的起止时间</div>
          </div>
          <div class="config-row-right">
              <div class="time-input-group">
                  <label data-i18n="start_time">开始时间</label>
                  <input type="time" id="night-mode-start" value="22:00">
                  <label data-i18n="end_time">结束时间</label>
                  <input type="time" id="night-mode-end" value="06:00">
              </div>
          </div>
      </div>

      <!-- Sync Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="sync_settings">同步设置</div>
              <div class="config-row-desc" data-i18n="auto_sync_desc">在相同 Google 账户的浏览器间同步代理数据 (默认开启)</div>
          </div>
          <div class="config-row-right">
              <label class="switch-modern">
                  <input type="checkbox" id="auto_sync_toggle" checked>
                  <span class="slider-modern"></span>
              </label>
          </div>
      </div>

      <!-- Config Management -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="config_management">配置管理</div>
              <div class="config-row-desc" data-i18n="config_desc">管理系统配置</div>
          </div>
          <div class="config-row-right">
              <div class="config-actions">
                  <div class="export_btn" data-i18n="export_config">导出完整配置 (JSON)</div>
                  <div class="import_json_btn" data-i18n="import_config">导入配置包 (JSON)</div>
                  <input type="file" id="json_file_input" accept=".json" style="display: none;" />
              </div>
          </div>
      </div>

      <!-- Proxy Detection -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="proxy_detection">代理状态检测</div>
              <div class="config-row-desc" data-i18n="proxy_detection_desc">检测当前系统代理配置，判断是否使用本插件</div>
          </div>
          <div class="config-row-right">
              <button id="detect-proxy-btn" class="control-btn">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                  <span data-i18n="proxy_detection_button">检测</span>
              </button>
              <button id="pac-details-btn" class="control-btn" style="margin-left: 10px;">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                  <span data-i18n="view_pac_button">查看PAC</span>
              </button>
          </div>
      </div>
    </div>

  </div>

  <div class="del_tip">
    <div class="del_tip_box">
      <div class="del_tip_title" data-i18n="delete_proxy_title">删除代理</div>
      <div class="del_tip_content" data-i18n="delete_proxy_confirm">确定要删除这个代理吗？</div>
      <div class="del_tip_btn">
          <div class="del_tip_Cancel_btn" data-i18n="cancel">取消</div>
          <div class="del_tip_del_btn" data-i18n="delete">删除</div>
      </div>
      <div class="del_tip_close_btn"></div>
    </div>
  </div>

  <div class="su_tip" data-i18n="save_success">保存成功</div>

  <!-- Proxy Detection Result Popup -->
  <div class="proxy_detection_tip">
      <div class="proxy_detection_box">
          <div class="proxy_detection_header">
              <span data-i18n="proxy_detection_title">代理状态检测结果</span>
              <div class="proxy_detection_close_btn"></div>
          </div>
          <div class="proxy_detection_content">
              <!-- Detection Status Icon -->
              <div class="detection-status-icon" id="detection-status-icon"></div>
              <!-- Detection Status Text -->
              <div class="detection-status-text" id="detection-status-text"></div>
              <!-- Detailed Information -->
              <div class="detection-details" id="detection-details">
                  <!-- Dynamically inserted detailed information -->
              </div>
              <!-- Warning Message -->
              <div class="detection-warning" id="detection-warning" style="display: none;"></div>
              <!-- Suggestion -->
              <div class="detection-suggestion" id="detection-suggestion" style="display: none;">
                  <span data-i18n="proxy_suggestion">💡 建议</span>
                  <span id="detection-suggestion-text"></span>
              </div>
          </div>
          <div class="proxy_detection_btn">
              <div class="proxy_detection_close_btn2" data-i18n="close">关闭</div>
          </div>
      </div>
  </div>

  <!-- PAC Details -->
  <div class="pac_details_tip">
      <div class="pac_details_box">
          <div class="pac_details_header">
              <span data-i18n="pac_details_title">PAC 脚本详情</span>
              <div class="pac_details_close_btn"></div>
          </div>
          <div class="pac_details_content">
              <!-- PAC Info -->
              <div class="pac-info-section">
                  <div class="pac-info-row">
                      <span class="pac-info-label" data-i18n="pac_mode">模式</span>
                      <span class="pac-info-value" id="pac-mode-value">自动</span>
                  </div>
                  <div class="pac-info-row">
                      <span class="pac-info-label" data-i18n="pac_generated">生成时间</span>
                      <span class="pac-info-value" id="pac-generated-time">-</span>
                  </div>
                  <div class="pac-info-row">
                      <span class="pac-info-label" data-i18n="pac_rules_count">规则数量</span>
                      <span class="pac-info-value" id="pac-rules-count">0</span>
                  </div>
              </div>
              <!-- Rules List -->
              <div class="pac-rules-section">
                  <div class="pac-rules-title" data-i18n="pac_rules_title">代理规则</div>
                  <div class="pac-rules-list" id="pac-rules-list">
                      <!-- Dynamically inserted rules -->
                  </div>
              </div>
              <!-- Full Script -->
              <div class="pac-script-section">
                  <div class="pac-script-header">
                      <span data-i18n="pac_full_script">完整脚本</span>
                      <button class="pac-script-copy-btn" id="pac-copy-btn" data-i18n="pac_copy_script">复制</button>
                  </div>
                  <pre class="pac-script-content" id="pac-script-content"></pre>
              </div>
          </div>
          <div class="pac_details_btn">
              <div class="pac_details_close_btn2" data-i18n="close">关闭</div>
          </div>
      </div>
  </div>
</body>

<script src="./js/jquery.js"></script>
<script src="./js/i18n.js"></script>
<script type="text/javascript" src="./js/main.js"></script>

</html>
