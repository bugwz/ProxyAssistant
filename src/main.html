<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title data-i18n="settings_title">代理助手设置</title>
  <link rel="icon" type="image/png" href="./images/icon-128.png">
  <link rel="shortcut icon" type="image/png" href="./images/icon-128.png">
  <link href="./css/eye-button.css" rel="stylesheet">
  <link href="./css/main.css" rel="stylesheet">
  <link href="./css/theme.css" rel="stylesheet">
</head>

<body>
  <div class="main-container">
    <div class="logo">
      <img src="./images/icon-128.png" alt="logo" />
      <span class="logo-text" data-i18n="app_name">代理助手</span>
    </div>

    <div class="section-title" data-i18n="manage_proxies">管理代理</div>
    <div class="header-container">
      <div class="header-left-controls">
          <div class="main-scenario-btn" data-type="main_scenario" title="切换场景" data-i18n-title="switch_scenario_tooltip">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                  <path d="M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"/>
              </svg>
          </div>
          <button id="scenario-manage-btn" class="control-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
              <span data-i18n="scenario_manage">场景管理</span>
          </button>
          <ul class="lh-select-op main-scenario-dropdown" id="main-scenario-options">
              <!-- Scenarios injected here -->
          </ul>
      </div>
      <div class="list-controls">
          <button id="add-proxy-btn" class="control-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              <span data-i18n="add_new">新增</span>
          </button>
          <button id="test-all-btn" class="control-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></svg>
              <span data-i18n="test_all">测试</span>
          </button>
          <button id="expand-collapse-btn" class="control-btn">
              <svg class="icon-expand" viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
              <span data-i18n="expand_all">展开</span>
          </button>
      </div>
    </div>

    <div class="scenario-indicator">
        <div class="scenario-indicator-line-left"></div>
        <div class="scenario-indicator-gap">
            <span class="scenario-indicator-text" id="current-scenario-indicator">默认场景</span>
        </div>
        <div class="scenario-indicator-line-right"></div>
    </div>

    <div id="proxy-list">

    </div>

    <div class="section-title system-config-title" data-i18n="system_config">系统设置</div>

    <div class="system-config-list">
      <!-- Language Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="language_settings">语言设置</div>
              <div class="config-row-desc" data-i18n="select_language">选择语言</div>
          </div>
          <div class="config-row-right">
               <div class="lh-select language-selector">
                   <div class="lh-select-k">
                       <span class="lh-select-value" id="current-language-display">简体中文</span>
                       <span class="iconfont"></span>
                   </div>
                   <ul class="lh-select-op" id="language-options">
                       <li data-value="zh-CN">简体中文</li>
                       <li data-value="zh-TW">繁體中文</li>
                       <li data-value="en">English</li>
                       <li data-value="ja">日本語</li>
                       <li data-value="fr">Français</li>
                       <li data-value="de">Deutsch</li>
                       <li data-value="es">Español</li>
                       <li data-value="ko">한국어</li>
                       <li data-value="pt">Português</li>
                       <li data-value="ru">Русский</li>
                   </ul>
               </div>
          </div>
      </div>

      <!-- Theme Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="theme_settings">主题模式</div>
              <div class="config-row-desc" data-i18n="theme_settings_desc">选择白天模式、夜间模式或自动切换</div>
          </div>
          <div class="config-row-right">
              <div class="theme-selector">
                  <button class="theme-btn" data-theme="light" data-i18n="theme_light">白天</button>
                  <button class="theme-btn" data-theme="dark" data-i18n="theme_dark">夜间</button>
                  <button class="theme-btn" data-theme="auto" data-i18n="theme_auto">自动</button>
              </div>
          </div>
      </div>

      <!-- Auto Mode Time Settings -->
      <div class="config-row auto-mode-time-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="dark_mode_schedule">自动切换时间</div>
              <div class="config-row-desc" data-i18n="dark_mode_schedule_desc">设置夜间模式的起止时间</div>
          </div>
          <div class="config-row-right">
              <div class="time-input-group">
                  <label data-i18n="start_time">开始时间</label>
                  <input type="time" id="night-mode-start" value="22:00">
                  <label data-i18n="end_time">结束时间</label>
                  <input type="time" id="night-mode-end" value="06:00">
              </div>
          </div>
      </div>

      <!-- Sync Setting -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="cloud_sync_settings">云同步方式</div>
              <div class="config-row-desc">
                  <span data-i18n="cloud_sync_desc">选择您的云同步方式，当前云同步方式: </span>
                  <span id="sync-status-badge" class="sync-status-badge"></span>
              </div>
          </div>
          <div class="config-row-right">
               <button id="open-sync-config-btn" class="control-btn has-margin-right">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3z"/></svg>
                   <span data-i18n="config_sync_btn">配置</span>
               </button>
               <button id="sync-pull-btn" class="control-btn has-margin-right">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"/></svg>
                   <span data-i18n="sync_pull">拉取</span>
               </button>
              <button id="sync-push-btn" class="control-btn">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM8 15h10v2H8v-2zm3-7.5L7.5 11 11 14.5l3.5-3.5L11 7.5z"/></svg>
                  <span data-i18n="sync_push">推送</span>
              </button>
          </div>
      </div>

      <!-- Config Management -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="config_management">配置管理</div>
              <div class="config-row-desc" data-i18n="config_desc">管理系统配置</div>
          </div>
          <div class="config-row-right">
              <div class="config-actions">
                  <div class="export-btn">
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                      <span data-i18n="export_config">导出</span>
                  </div>
                  <div class="import-json-btn">
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/></svg>
                      <span data-i18n="import_config">导入</span>
                  </div>
                   <input type="file" id="json-file-input" accept=".json" class="json-file-input" />
              </div>
          </div>
      </div>

      <!-- Proxy Detection -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="proxy_detection">代理状态检测</div>
              <div class="config-row-desc" data-i18n="proxy_detection_desc">检测当前系统代理配置，判断是否使用本插件</div>
          </div>
          <div class="config-row-right">
              <button id="detect-proxy-btn" class="control-btn">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                  <span data-i18n="proxy_detection_button">检测</span>
              </button>
               <button id="pac-details-btn" class="control-btn has-margin-left">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                   <span data-i18n="view_pac_button">查看PAC</span>
               </button>
          </div>
      </div>

      <!-- Version Check -->
      <div class="config-row">
          <div class="config-row-left">
              <div class="config-row-title" data-i18n="version_check">版本检测</div>
              <div class="config-row-desc" data-i18n="version_check_desc">检测当前版本及更新信息</div>
          </div>
          <div class="config-row-right">
              <button id="check-version-btn" class="control-btn">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                  <span data-i18n="version_check_btn">检测</span>
              </button>
          </div>
      </div>
    </div>

  </div>

   <div class="delete-tip">
     <div class="delete-tip-box">
       <div class="delete-tip-header">
         <span data-i18n="delete_proxy_title">删除代理</span>
         <div class="delete-tip-close-btn">
           <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
         </div>
       </div>
       <div class="delete-tip-content" data-i18n="delete_proxy_confirm">确定要删除这个代理吗？</div>
       <div class="delete-tip-buttons">
         <div class="delete-tip-cancel-btn" data-i18n="cancel">取消</div>
         <div class="delete-tip-confirm-btn" data-i18n="delete">删除</div>
       </div>
     </div>
   </div>

   <div class="save-success-toast" style="display: none;"><span class="icon"></span><span class="message" data-i18n="save_success">保存成功</span></div>

  <!-- Proxy Detection Result Popup -->
  <div class="proxy-detection-tip">
      <div class="proxy-detection-box">
           <div class="proxy-detection-header">
               <span data-i18n="proxy_detection_title">代理状态检测结果</span>
               <div class="proxy-detection-close-btn">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
               </div>
           </div>
          <div class="proxy-detection-content">
              <!-- Detection Status Icon -->
              <div class="detection-status-icon" id="detection-status-icon"></div>
              <!-- Detection Status Text -->
              <div class="detection-status-text" id="detection-status-text"></div>
              <!-- Detailed Information -->
              <div class="detection-details" id="detection-details">
                  <!-- Dynamically inserted detailed information -->
              </div>
               <!-- Warning Message -->
               <div class="detection-warning" id="detection-warning"></div>
               <!-- Suggestion -->
               <div class="detection-suggestion" id="detection-suggestion">
                   <span data-i18n="proxy_suggestion">💡 建议</span>
                   <span id="detection-suggestion-text"></span>
               </div>
          </div>
      </div>
  </div>

  <!-- Version Check Result Popup -->
  <div class="version-check-tip">
      <div class="version-check-box">
           <div class="version-check-header">
               <span data-i18n="version_check_title">版本检测结果</span>
               <div class="version-check-close-btn">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
               </div>
           </div>
           <div class="version-check-content">
               <div class="version-info-row">
                   <div class="version-label" data-i18n="current_version">当前版本</div>
                   <div class="version-value" id="current-version-value">-</div>
               </div>
               <div class="version-info-row">
                   <div class="version-label" data-i18n="store_version">应用商店版本</div>
                   <div class="version-value" id="store-version-value">
                       <span data-i18n="version_checking">检测中...</span>
                   </div>
               </div>
               <div class="version-info-row">
                   <div class="version-label" data-i18n="github_version">GitHub 版本</div>
                   <div class="version-value" id="github-version-value">
                       <span data-i18n="version_checking">检测中...</span>
                   </div>
               </div>
           </div>
       </div>
   </div>

  <!-- Sync Config Popup -->
  <div class="sync-config-tip">
      <div class="sync-config-box">
           <div class="sync-config-header">
               <span data-i18n="cloud_sync_settings">云同步设置</span>
               <div class="sync-config-close-btn">
                   <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
               </div>
           </div>
           <div class="sync-config-content">
               
               <div class="form-item with-margin-bottom">
                   <label data-i18n="sync_method">同步方式</label>
                   <div class="lh-select sync-selector" data-type="sync_mode">
                       <div class="lh-select-k">
                           <span class="lh-select-value" id="current-sync-display" data-i18n="sync_native">浏览器原生同步</span>
                           <span class="iconfont"></span>
                       </div>
                       <ul class="lh-select-op" id="sync-options">
                           <li data-value="native" data-i18n="sync_native">浏览器原生同步</li>
                           <li data-value="gist" data-i18n="sync_gist">GitHub Gist</li>
                       </ul>
                   </div>
               </div>

                <!-- Gist Config Panel -->
                <div class="sync-panel" id="gist-config">
                    <div class="gist-instruction">
                        <div class="gist-instruction-inner">
                            <span class="gist-instruction-text" data-i18n="gist_instruction">建议使用 Tokens (classic)，仅需勾选 'gist' 权限</span>
                            <div class="gist-instruction-links">
                                <a href="https://github.com/settings/tokens" target="_blank" class="gist-link no-margin">
                                    <span data-i18n="gist_link_text">去创建 Token</span>
                                    <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6v2H5v11h11v-6h2z"/></svg>
                                </a>
                            </div>
                        </div>
                        <div class="gist-instruction-footer">
                            <span class="gist-instruction-notice" data-i18n="gist_privacy_notice">注：将自动创建私有 (Secret) Gist，他人无法访问</span>
                            <a href="https://gist.github.com/" target="_blank" class="gist-link no-margin">
                                <span data-i18n="view_gists_link">查看我的 Gist</span>
                                <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6v2H5v11h11v-6h2z"/></svg>
                            </a>
                        </div>
                    </div>
                     <div class="form-grid">
                        <div class="form-item full-width">
                            <label data-i18n="access_token">Access Token</label>
                            <div class="input-wrapper">
                                <input type="password" id="gist-token" placeholder="ghp_xxxxxxxxxxxx">
                                <label class="eye-toggle hide-password" id="gist-token-eye">
                                    <input type="checkbox">
                                    <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>
                                   <svg class="eye-slash-icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"></path></svg>
                               </label>
                           </div>
                        </div>
                        <div class="form-item full-width">
                            <label data-i18n="gist_filename">文件名</label>
                            <input type="text" id="gist-filename" placeholder="proxy_assistant_config.json">
                        </div>
                    </div>
                </div>

                <!-- Native Config Panel -->
                <div class="sync-panel" id="native-config">
                    <div class="native-sync-info">
                        <svg viewBox="0 0 24 24" width="48" height="48" fill="#4164f5" opacity="0.8"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                        <span data-i18n="auto_sync_desc">在相同账户 (Google/FireFox) 的浏览器间同步代理数据</span>
                    </div>
                    <!-- Storage Quota Display -->
                    <div class="quota-container">
                        <div class="quota-text" id="quota-usage-text"></div>
                        <div class="quota-bar">
                            <div class="quota-bar-fill" id="quota-bar-fill"></div>
                        </div>
                        <div class="quota-warning" id="quota-warning"></div>
                    </div>
                </div>

           </div>
            <div class="sync-config-footer">
                <button class="btn-test" id="test-sync-connection">
                    <span data-i18n="test_connection">测试连接</span>
                </button>
               <button class="btn-save" id="save-sync-config">
                   <span data-i18n="save_config">保存</span>
               </button>
           </div>
      </div>
  </div>

   <!-- Scenario Management Modal -->
    <div class="scenario-manage-tip">
        <div class="scenario-manage-box">
            <div class="scenario-manage-header">
                <span data-i18n="scenario_manage">场景管理</span>
                <div class="scenario-manage-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
            <div class="scenario-manage-content">
                 <div class="add-scenario-form">
                     <input type="text" id="new-scenario-name" class="form-control" data-i18n-placeholder="scenario_name_placeholder" placeholder="例如: 家庭, 公司">
                     <button id="add-scenario-btn" class="control-btn">
                         <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="btn-icon-vertical-align"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                         <span data-i18n="add_new">新增</span>
                     </button>
                 </div>

                 <div class="scenario-list" id="scenario-manage-list">
                     <!-- Scenario items injected here -->
                 </div>
            </div>
       </div>
    </div>

     <!-- Edit Scenario Name Modal -->
    <div class="edit-scenario-tip">
        <div class="edit-scenario-box">
            <div class="edit-scenario-header">
                <span data-i18n="scenario_edit">编辑场景</span>
                <div class="edit-scenario-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
              <div class="edit-scenario-content">
                  <div class="current-scenario-row">
                      <span class="current-scenario-label" data-i18n="scenario_old_name">原名称:</span>
                      <span id="edit-scenario-oldname" class="current-scenario-value"></span>
                  </div>
                  <div class="target-scenario-row">
                      <label class="target-scenario-label" data-i18n="scenario_new_name">新名称:</label>
                      <input type="text" id="edit-scenario-name" class="form-control edit-scenario-input">
                  </div>
                  <div class="edit-scenario-footer">
                    <button class="control-btn edit-scenario-cancel-btn" data-i18n="cancel">取消</button>
                    <button class="control-btn confirm-edit-btn" id="confirm-edit-scenario-btn">
                        <span data-i18n="save">保存</span>
                    </button>
                  </div>
              </div>
        </div>
    </div>

     <!-- Delete Scenario Confirm Modal -->
    <div class="delete-scenario-tip">
        <div class="delete-scenario-box">
            <div class="delete-scenario-header">
                <span data-i18n="delete_scenario_title">删除场景</span>
                <div class="delete-scenario-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width:2><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
            <div class="delete-scenario-content">
                <p id="delete-scenario-message" class="modal-message"></p>
                <div class="delete-scenario-footer">
                    <button class="control-btn delete-scenario-cancel-btn" data-i18n="cancel">取消</button>
                    <button class="control-btn confirm-delete-btn" id="confirm-delete-scenario-btn">
                        <span data-i18n="delete">删除</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

     <!-- Alert Modal -->
    <div class="alert-scenario-tip">
        <div class="alert-scenario-box">
            <div class="alert-scenario-header">
                <span data-i18n="alert">提示</span>
                <div class="alert-scenario-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width:2><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
            <div class="alert-scenario-content">
                <p id="alert-scenario-message" class="modal-message"></p>
                <div class="modal-footer">
                    <button class="control-btn alert-ok-btn" id="alert-scenario-ok-btn" data-i18n="ok">确定</button>
                </div>
            </div>
        </div>
    </div>

    <div class="move-proxy-tip">
        <div class="move-proxy-box">
            <div class="move-proxy-header">
                <span data-i18n="move_proxy_title">移动代理</span>
                <div class="move-proxy-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
             <div class="move-proxy-content">
                 <div class="current-scenario-row">
                     <span class="current-scenario-label" data-i18n="current_scenario">当前场景</span>
                     <span id="current-scenario-display" class="current-scenario-value"></span>
                 </div>
                 <div class="target-scenario-row">
                     <label class="target-scenario-label" data-i18n="target_scenario">目标场景</label>
                     <div class="lh-select target-scenario-selector">
                         <div class="lh-select-k">
                             <span class="lh-select-value" id="target-scenario-display">请选择</span>
                             <span class="iconfont"></span>
                         </div>
                         <ul class="lh-select-op" id="target-scenario-options">
                         </ul>
                     </div>
                 </div>
                 
                 <div class="move-proxy-footer">
                    <button class="control-btn move-proxy-cancel-btn" data-i18n="cancel">取消</button>
                    <button class="control-btn" id="confirm-move-proxy-btn">
                        <span data-i18n="move_proxy">移动</span>
                    </button>
                </div>
            </div>
        </div>
     </div>

    <!-- PAC Details -->
   <div class="pac-details-tip">
       <div class="pac-details-box">
            <div class="pac-details-header">
                <span data-i18n="pac_details_title">PAC 脚本详情</span>
                <div class="pac-details-close-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                </div>
            </div>
            <div class="pac-details-scroll-content">
                <div class="pac-details-content">
                   <!-- PAC Info -->
                   <div class="pac-info-section">
                       <div class="pac-info-row">
                           <span class="pac-info-label" data-i18n="pac_mode">模式</span>
                           <span class="pac-info-value" id="pac-mode-value">自动</span>
                       </div>
                       <div class="pac-info-row">
                           <span class="pac-info-label" data-i18n="pac_generated">生成时间</span>
                           <span class="pac-info-value" id="pac-generated-time">-</span>
                       </div>
                       <div class="pac-info-row">
                           <span class="pac-info-label" data-i18n="pac_rules_count">规则数量</span>
                           <span class="pac-info-value" id="pac-rules-count">0</span>
                       </div>
                   </div>
                   <!-- Rules List -->
                   <div class="pac-rules-section">
                       <div class="pac-rules-title" data-i18n="pac_rules_title">代理规则</div>
                       <div class="pac-rules-table">
                           <div class="pac-rules-header">
                               <span class="pac-rules-header-pattern" data-i18n="pac_rule_pattern">匹配规则</span>
                               <span class="pac-rules-header-proxy" data-i18n="pac_rule_proxy">代理服务器</span>
                           </div>
                           <div class="pac-rules-list" id="pac-rules-list">
                               <!-- Dynamically inserted rules -->
                           </div>
                       </div>
                   </div>
                   <!-- Full Script -->
                   <div class="pac-script-section">
                       <div class="pac-script-header">
                           <span data-i18n="pac_full_script">完整脚本</span>
                           <div class="pac-script-actions">
                               <button class="pac-script-toggle-btn" id="pac-toggle-btn">
                                   <svg class="pac-toggle-icon" viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                               </button>
                               <button class="pac-script-copy-btn" id="pac-copy-btn">
                                   <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                               </button>
                           </div>
                       </div>
                   <div class="pac-script-wrapper collapsed" id="pac-script-wrapper">
                       <pre class="pac-script-content" id="pac-script-content"></pre>
                   </div>
                </div>
            </div>
       </div>
   </div>
</body>

  <script src="./js/jquery.js"></script>
  <script src="./js/i18n.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/validator.js"></script>
  <script src="./js/language.js"></script>
  <script src="./js/theme.js"></script>
  <script src="./js/sync.js"></script>
  <script src="./js/config.js"></script>
  <script src="./js/detection.js"></script>
  <script src="./js/version.js"></script>
  <script src="./js/scenarios.js"></script>
  <script src="./js/proxy.js"></script>
  <script src="./js/main.js"></script>

</html>
